---
layout: post
title:  "1786 찾기 KMP"
date: 2018-03-31 08:00:00 +0900
description: You’ll find this post in your `_posts` directory. Go ahead and edit it and re-build the site to see your changes. # Add post description (optional)
img:  # Add image post (optional)
tags: [알고리즘, 백준, 1786, 1786 찾기 KMP]
---
# 1786 찾기 KMP
```
//
//  1786 찾기 KMP.cpp
//  Algorithm
//
//  Created by bbvch13531 on 2018. 3. 31..
//  Copyright © 2018년 bbvch13531. All rights reserved.
//
#define MAX 1000000
#include <cstdio>
#include <iostream>
#include <string>
#include <cstring>
#include <vector>
using namespace std;

void getPi(string);
void kmp(string,string);

vector<int> pi(MAX,0),res;

int main(void){
    ios_base::sync_with_stdio(0);
    cin.tie(NULL);
    int ansSize;
    char buf[MAX],ch;
    string T,P;
//    scanf("%[^\n]\n",buf);
//    T=buf;
//
//    scanf("%[^\n]",buf);
//    P=buf;
//    scanf는 비공백 문자부터 읽어들인다. 이 부분에서 에러났었음
    getline(cin,T);
    getline(cin,P);

//    cout<<T<<endl<<P<<endl;
    //getc gets 는 c++11이후 버전에서 deprecate되었다.
    kmp(T,P);
    
    ansSize=res.size();
    cout<<ansSize<<endl;
    for(int i=0;i<ansSize;i++) printf("%d ",res[i]+1);
    return 0;
}
void getPi(string s){
    int n=(int)s.size(),j=0;
    fill(pi.begin(),pi.end(),0);
    for(int i=1;i<n;i++){
        //substring
        while(j>0 && s[i]!=s[j]){
            j = pi[j-1];
        }
        if(s[i]==s[j]){
            j++;
            pi[i]=j;
        }
    }
}
void kmp(string T,string P){
    getPi(P);
    int n=(int)T.size(),m=(int)P.size(),j=0;
    for(int i=0;i<n;i++){
        while (j>0 && T[i]!=P[j]) {
            j=pi[j-1];
        }
        if(T[i]==P[j]){
            if(j==m-1){
                res.push_back(i-j);
                j=pi[j];
            }
            else j++;
        }
    }
}

```